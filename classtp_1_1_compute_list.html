<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>tp::ComputeList class | Tephra Documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-dark-tephra.css" />
  <link rel="stylesheet" href="m-documentation.css" />
  <link rel="stylesheet" href="m-theme-dark-tephra.css" />
  <link rel="stylesheet" href="m-grid.css" />
  <link rel="stylesheet" href="m-components.css" />
  <link rel="stylesheet" href="m-layout.css" />
  <link rel="stylesheet" href="pygments-dark.css" />
  <link rel="stylesheet" href="pygments-console.css" />
  <link rel="icon" href="favicon-dark.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#2c1b15" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <span id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">
        <a href="https://github.com/Dolkar/Tephra">Tephra</a> <span class="m-breadcrumb">|</span> <a href="index.html" class="m-thin">Documentation</a>
      </span>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path id="m-doc-search-icon-path" d="m6 0c-3.31 0-6 2.69-6 6 0 3.31 2.69 6 6 6 1.49 0 2.85-0.541 3.89-1.44-0.0164 0.338 0.147 0.759 0.5 1.15l3.22 3.79c0.552 0.614 1.45 0.665 2 0.115 0.55-0.55 0.499-1.45-0.115-2l-3.79-3.22c-0.392-0.353-0.812-0.515-1.15-0.5 0.895-1.05 1.44-2.41 1.44-3.89 0-3.31-2.69-6-6-6zm0 1.56a4.44 4.44 0 0 1 4.44 4.44 4.44 4.44 0 0 1-4.44 4.44 4.44 4.44 0 0 1-4.44-4.44 4.44 4.44 0 0 1 4.44-4.44z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="user-guide.html">User Guide</a></li>
            <li><a href="examples.html">Examples and Tests</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="3">
            <li><a href="changelog.html">Changelog</a></li>
            <li><a href="https://github.com/Dolkar/Tephra/discussions">Discussions</a></li>
            <li><a href="annotated.html">API</a></li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <use href="#m-doc-search-icon-path" />
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          <span class="m-breadcrumb"><a href="namespacetp.html">tp</a>::<wbr/></span>ComputeList <span class="m-thin">class</span>
        </h1>
        <p>Provides an interface to directly record compute commands into a Vulkan   <a href="https://www.khronos.org/registry/vulkan/specs/1.3-extensions/man/html/VkCommandBuffer.html" class="m-doc-external">VkCommandBuffer</a> inside a compute pass.</p>
        <nav class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li>
              Reference
              <ul>
                <li><a href="#base-classes">Base classes</a></li>
                <li><a href="#typeless-methods">Constructors, destructors, conversion operators</a></li>
                <li><a href="#pub-methods">Public functions</a></li>
              </ul>
            </li>
          </ul>
        </nav>
<p>The behavior and expected usage differs depending on the variant of the <code>commandRecording</code> parameter passed to <a href="classtp_1_1_job.html#a3743dd4c6e7f8d56e153290543342afb" class="m-doc">tp::<wbr />Job::<wbr />cmdExecuteComputePass</a>.</p><p>If the list was provided through the tp::ArrayView&lt;tp::ComputeList&gt; variant, then <a href="classtp_1_1_compute_list.html#a2461b00f05368227d9fda369d70850fd" class="m-doc">tp::<wbr />ComputeList::<wbr />beginRecording</a> must be called before the first and <a href="classtp_1_1_compute_list.html#a969c0b1eb83b5b690343215d2ae81a39" class="m-doc">tp::<wbr />ComputeList::<wbr />endRecording</a> after the last recorded command.</p><p>If the list was provided as a parameter to <a href="namespacetp.html#aa35536cf20aa7489b1e861514ec00ea4" class="m-doc">tp::<wbr />ComputeInlineCallback</a> using the function callback variant, <a href="classtp_1_1_compute_list.html#a2461b00f05368227d9fda369d70850fd" class="m-doc">tp::<wbr />ComputeList::<wbr />beginRecording</a> and <a href="classtp_1_1_compute_list.html#a969c0b1eb83b5b690343215d2ae81a39" class="m-doc">tp::<wbr />ComputeList::<wbr />endRecording</a> must not be called. Any changed state (cmdBind..., cmdSet...) persists between all inline lists within the same <a href="classtp_1_1_job.html" class="m-doc">tp::<wbr />Job</a>.</p><aside class="m-note m-default"><h4>See also</h4><p><a href="classtp_1_1_job.html#a3743dd4c6e7f8d56e153290543342afb" class="m-doc">tp::<wbr />Job::<wbr />cmdExecuteComputePass</a></p><p><a href="https://www.khronos.org/registry/vulkan/specs/1.3-extensions/man/html/VkCommandBuffer.html" class="m-doc-external">VkCommandBuffer</a></p></aside>
        <section id="base-classes">
          <h2><a href="#base-classes">Base classes</a></h2>
          <dl class="m-doc">
            <dt>
              class <a href="classtp_1_1_command_list.html" class="m-doc">CommandList</a>
            </dt>
            <dd>An abstract class that implements common functionality for recording commands inside either a compute or render pass. See <a href="classtp_1_1_compute_list.html" class="m-doc">tp::<wbr />ComputeList</a> and <a href="classtp_1_1_render_list.html" class="m-doc">tp::<wbr />RenderList</a> for further details.</dd>
          </dl>
        </section>
        <section id="typeless-methods">
          <h2><a href="#typeless-methods">Constructors, destructors, conversion operators</a></h2>
          <dl class="m-doc">
            <dt id="a0038b0312b674e09822fadf01d07adbb">
              <span class="m-doc-wrap-bumper"><a href="#a0038b0312b674e09822fadf01d07adbb" class="m-doc-self">ComputeList</a>(</span><span class="m-doc-wrap">)</span>
            </dt>
            <dd>Constructs a null <a href="classtp_1_1_compute_list.html" class="m-doc">tp::<wbr />ComputeList</a>.</dd>
          </dl>
        </section>
        <section id="pub-methods">
          <h2><a href="#pub-methods">Public functions</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a2461b00f05368227d9fda369d70850fd" class="m-doc">beginRecording</a>(</span><span class="m-doc-wrap"><a href="classtp_1_1_command_pool.html" class="m-doc">CommandPool</a>* commandPool)</span>
            </dt>
            <dd>Begins recording commands to the list, using the given command pool.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a0b377fe3da1edec80b9a0e81087b0e65" class="m-doc">cmdBindComputePipeline</a>(</span><span class="m-doc-wrap">const <a href="classtp_1_1_pipeline.html" class="m-doc">Pipeline</a>&amp; pipeline)</span>
            </dt>
            <dd>Binds a compute <a href="classtp_1_1_pipeline.html" class="m-doc">tp::<wbr />Pipeline</a> for use in the subsequent dispatch commands.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a9516223319123c64e738b820f47a9480" class="m-doc">cmdDispatch</a>(</span><span class="m-doc-wrap">uint32_t groupCountX,
              uint32_t groupCountY = 1,
              uint32_t groupCountZ = 1)</span>
            </dt>
            <dd>Records a dispatch of <code>groupCountX * groupCountY * groupCountZ</code> compute workgroups.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a1d6af307e7fc185351a250543149e2d5" class="m-doc">cmdDispatchIndirect</a>(</span><span class="m-doc-wrap">const <a href="classtp_1_1_buffer_view.html" class="m-doc">BufferView</a>&amp; dispatchParamBuffer)</span>
            </dt>
            <dd>Records an indirect dispatch with the parameters sourced from a buffer.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#adc3552ffb74d64e5c0b9f02a57fb3587" class="m-doc">cmdPipelineBarrier</a>(</span><span class="m-doc-wrap"><a href="classtp_1_1_array_parameter.html" class="m-doc">ArrayParameter</a>&lt;const std::pair&lt;<a href="namespacetp.html#af2cf9c48a1ce479a68eb4017b034c703" class="m-doc">ComputeAccessMask</a>, <a href="namespacetp.html#af2cf9c48a1ce479a68eb4017b034c703" class="m-doc">ComputeAccessMask</a>&gt;&gt; dependencies)</span>
            </dt>
            <dd>Inserts a pipeline barrier that synchronizes the given dependencies of future commands on past commands.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a5a7d65505e39e5897458857dc6915bd7" class="m-doc">cmdWriteTimestamp</a>(</span><span class="m-doc-wrap">const <a href="classtp_1_1_timestamp_query.html" class="m-doc">TimestampQuery</a>&amp; query,
              <a href="namespacetp.html#a053aec667af5489bac94921ecb4862ce" class="m-doc">PipelineStage</a> stage = PipelineStage::BottomOfPipe)</span>
            </dt>
            <dd>Queries the time on the device as part of the given pipeline stage and writes the result to the provided query object.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a969c0b1eb83b5b690343215d2ae81a39" class="m-doc">endRecording</a>(</span><span class="m-doc-wrap">)</span>
            </dt>
            <dd>Ends recording commands to the list. No other methods can be called after this point.</dd>
          </dl>
        </section>
        <section>
          <h2>Function documentation</h2>
          <section class="m-doc-details" id="a2461b00f05368227d9fda369d70850fd"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void tp::<wbr />ComputeList::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a2461b00f05368227d9fda369d70850fd" class="m-doc-self">beginRecording</a>(</span><span class="m-doc-wrap"><a href="classtp_1_1_command_pool.html" class="m-doc">CommandPool</a>* commandPool)</span></span>
            </h3>
            <p>Begins recording commands to the list, using the given command pool.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">commandPool</td>
                  <td>The command pool to use for memory allocations for command recording. Cannot be nullptr.</td>
                </tr>
              </tbody>
            </table>
<aside class="m-note m-default"><h4>Remark</h4><p>The parent <a href="classtp_1_1_job.html" class="m-doc">tp::<wbr />Job</a> must be in an enqueued state.</p><p>The <a href="classtp_1_1_compute_list.html" class="m-doc">tp::<wbr />ComputeList</a> must not have been received as a parameter to <a href="namespacetp.html#aa35536cf20aa7489b1e861514ec00ea4" class="m-doc">tp::<wbr />ComputeInlineCallback</a>.</p><p>The <a href="classtp_1_1_command_pool.html" class="m-doc">tp::<wbr />CommandPool</a> is not thread safe. Only one thread may be recording commands using the same pool at a time.</p></aside><aside class="m-note m-default"><h4>See also</h4><p><a href="https://www.khronos.org/registry/vulkan/specs/1.3-extensions/man/html/vkBeginCommandBuffer.html" class="m-doc-external">vkBeginCommandBuffer</a></p></aside>
          </div></section>
          <section class="m-doc-details" id="a0b377fe3da1edec80b9a0e81087b0e65"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void tp::<wbr />ComputeList::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a0b377fe3da1edec80b9a0e81087b0e65" class="m-doc-self">cmdBindComputePipeline</a>(</span><span class="m-doc-wrap">const <a href="classtp_1_1_pipeline.html" class="m-doc">Pipeline</a>&amp; pipeline)</span></span>
            </h3>
            <p>Binds a compute <a href="classtp_1_1_pipeline.html" class="m-doc">tp::<wbr />Pipeline</a> for use in the subsequent dispatch commands.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">pipeline</td>
                  <td>The pipeline object to bind.</td>
                </tr>
              </tbody>
            </table>
<aside class="m-note m-default"><h4>Remark</h4><p>If the pipeline was created with a <a href="classtp_1_1_pipeline_layout.html" class="m-doc">tp::<wbr />PipelineLayout</a> whose descriptor set layouts are compatible with the pipeline layout of sets previously bound with <a href="classtp_1_1_command_list.html#a0636227ef981fbd2998c802dd73a8eb2" class="m-doc">tp::<wbr />ComputeList::<wbr />cmdBindDescriptorSets</a>, then the descriptor sets are not disturbed and may still be accessed, up to the first incompatible set number.</p></aside><aside class="m-note m-default"><h4>See also</h4><p><a href="https://www.khronos.org/registry/vulkan/specs/1.3-extensions/man/html/vkCmdBindPipeline.html" class="m-doc-external">vkCmdBindPipeline</a></p></aside>
          </div></section>
          <section class="m-doc-details" id="a9516223319123c64e738b820f47a9480"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void tp::<wbr />ComputeList::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a9516223319123c64e738b820f47a9480" class="m-doc-self">cmdDispatch</a>(</span><span class="m-doc-wrap">uint32_t groupCountX,
              uint32_t groupCountY = 1,
              uint32_t groupCountZ = 1)</span></span>
            </h3>
            <p>Records a dispatch of <code>groupCountX * groupCountY * groupCountZ</code> compute workgroups.</p>
<aside class="m-note m-default"><h4>Remark</h4><p>The parameters describe the number of workgroups, <em>NOT</em> the number of invocations. The total number of invocations in each dimension will be the number of workgroups multiplied with the workgroup side as defined by the compute shader in the currently bound pipeline.</p></aside><aside class="m-note m-default"><h4>See also</h4><p><a href="https://www.khronos.org/registry/vulkan/specs/1.3-extensions/man/html/vkCmdDispatch.html" class="m-doc-external">vkCmdDispatch</a></p></aside>
          </div></section>
          <section class="m-doc-details" id="a1d6af307e7fc185351a250543149e2d5"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void tp::<wbr />ComputeList::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a1d6af307e7fc185351a250543149e2d5" class="m-doc-self">cmdDispatchIndirect</a>(</span><span class="m-doc-wrap">const <a href="classtp_1_1_buffer_view.html" class="m-doc">BufferView</a>&amp; dispatchParamBuffer)</span></span>
            </h3>
            <p>Records an indirect dispatch with the parameters sourced from a buffer.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">dispatchParamBuffer</td>
                  <td>The buffer containing dispatch parameters in the form of   <a href="https://www.khronos.org/registry/vulkan/specs/1.3-extensions/man/html/VkDispatchIndirectCommand.html" class="m-doc-external">VkDispatchIndirectCommand</a>.</td>
                </tr>
              </tbody>
            </table>
<aside class="m-note m-default"><h4>See also</h4><p><a href="https://www.khronos.org/registry/vulkan/specs/1.3-extensions/man/html/vkCmdDispatchIndirect.html" class="m-doc-external">vkCmdDispatchIndirect</a></p></aside>
          </div></section>
          <section class="m-doc-details" id="adc3552ffb74d64e5c0b9f02a57fb3587"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void tp::<wbr />ComputeList::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#adc3552ffb74d64e5c0b9f02a57fb3587" class="m-doc-self">cmdPipelineBarrier</a>(</span><span class="m-doc-wrap"><a href="classtp_1_1_array_parameter.html" class="m-doc">ArrayParameter</a>&lt;const std::pair&lt;<a href="namespacetp.html#af2cf9c48a1ce479a68eb4017b034c703" class="m-doc">ComputeAccessMask</a>, <a href="namespacetp.html#af2cf9c48a1ce479a68eb4017b034c703" class="m-doc">ComputeAccessMask</a>&gt;&gt; dependencies)</span></span>
            </h3>
            <p>Inserts a pipeline barrier that synchronizes the given dependencies of future commands on past commands.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">dependencies</td>
                  <td>The global execution and memory dependencies to synchronize.</td>
                </tr>
              </tbody>
            </table>
<aside class="m-note m-default"><h4>See also</h4><p><a href="https://www.khronos.org/registry/vulkan/specs/1.3-extensions/man/html/vkCmdPipelineBarrier.html" class="m-doc-external">vkCmdPipelineBarrier</a></p></aside>
          </div></section>
          <section class="m-doc-details" id="a5a7d65505e39e5897458857dc6915bd7"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void tp::<wbr />ComputeList::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a5a7d65505e39e5897458857dc6915bd7" class="m-doc-self">cmdWriteTimestamp</a>(</span><span class="m-doc-wrap">const <a href="classtp_1_1_timestamp_query.html" class="m-doc">TimestampQuery</a>&amp; query,
              <a href="namespacetp.html#a053aec667af5489bac94921ecb4862ce" class="m-doc">PipelineStage</a> stage = PipelineStage::BottomOfPipe)</span></span>
            </h3>
            <p>Queries the time on the device as part of the given pipeline stage and writes the result to the provided query object.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">query</td>
                  <td>The timestamp query object that the result will be written to.</td>
                </tr>
                <tr>
                  <td>stage</td>
                  <td>The pipeline stage at which the timestamp should be measured. This means a time point at which all the previously submitted commands have finished executing the given pipeline stage.</td>
                </tr>
              </tbody>
            </table>
          </div></section>
          <section class="m-doc-details" id="a969c0b1eb83b5b690343215d2ae81a39"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void tp::<wbr />ComputeList::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a969c0b1eb83b5b690343215d2ae81a39" class="m-doc-self">endRecording</a>(</span><span class="m-doc-wrap">)</span></span>
            </h3>
            <p>Ends recording commands to the list. No other methods can be called after this point.</p>
<aside class="m-note m-default"><h4>Remark</h4><p>The parent <a href="classtp_1_1_job.html" class="m-doc">tp::<wbr />Job</a> must be in an enqueued state.</p><p>The <a href="classtp_1_1_compute_list.html" class="m-doc">tp::<wbr />ComputeList</a> must not have been received as a parameter to <a href="namespacetp.html#aa35536cf20aa7489b1e861514ec00ea4" class="m-doc">tp::<wbr />ComputeInlineCallback</a>.</p></aside><aside class="m-note m-default"><h4>See also</h4><p><a href="https://www.khronos.org/registry/vulkan/specs/1.3-extensions/man/html/vkEndCommandBuffer.html" class="m-doc-external">vkEndCommandBuffer</a></p></aside>
          </div></section>
        </section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search-v2.js"></script>
<script src="searchdata-v2.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>Tephra Documentation. Created with <a href="https://doxygen.org/">Doxygen</a> 1.9.6 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
