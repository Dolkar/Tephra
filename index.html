<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Tephra Documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-dark-tephra.css" />
  <link rel="stylesheet" href="m-documentation.css" />
  <link rel="stylesheet" href="m-theme-dark-tephra.css" />
  <link rel="stylesheet" href="m-grid.css" />
  <link rel="stylesheet" href="m-components.css" />
  <link rel="stylesheet" href="m-layout.css" />
  <link rel="stylesheet" href="pygments-dark.css" />
  <link rel="stylesheet" href="pygments-console.css" />
  <link rel="icon" href="favicon-dark.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#2c1b15" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <span id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">
        <a href="https://github.com/Dolkar/Tephra">Tephra</a> <span class="m-breadcrumb">|</span> <a href="index.html" class="m-thin">Documentation</a>
      </span>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path id="m-doc-search-icon-path" d="m6 0c-3.31 0-6 2.69-6 6 0 3.31 2.69 6 6 6 1.49 0 2.85-0.541 3.89-1.44-0.0164 0.338 0.147 0.759 0.5 1.15l3.22 3.79c0.552 0.614 1.45 0.665 2 0.115 0.55-0.55 0.499-1.45-0.115-2l-3.79-3.22c-0.392-0.353-0.812-0.515-1.15-0.5 0.895-1.05 1.44-2.41 1.44-3.89 0-3.31-2.69-6-6-6zm0 1.56a4.44 4.44 0 0 1 4.44 4.44 4.44 4.44 0 0 1-4.44 4.44 4.44 4.44 0 0 1-4.44-4.44 4.44 4.44 0 0 1 4.44-4.44z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="user-guide.html">User Guide</a></li>
            <li><a href="examples.html">Examples and Tests</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="3">
            <li><a href="changelog.html">Changelog</a></li>
            <li><a href="https://github.com/Dolkar/Tephra/discussions">Discussions</a></li>
            <li><a href="annotated.html">API</a></li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <use href="#m-doc-search-icon-path" />
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          Tephra
        </h1>
<p><a name="md__home_runner_work_Tephra_Tephra_README"></a>**_A modern C++17 graphics and compute library filling the gap between <a href="https://www.vulkan.org/">Vulkan</a> and high-level APIs such as OpenGL._**</p><p><strong>License</strong>: <a href="https://github.com/Dolkar/Tephra/blob/main/LICENSE">MIT</a></p><p><strong>Current version</strong>: <a href="https://dolkar.github.io/Tephra/changelog.html">v0.8.0</a></p><p><strong>Links</strong>: <a href="https://dolkar.github.io/Tephra/user-guide.html">User guide</a> | <a href="https://dolkar.github.io/Tephra/annotated.html">API Documentation</a> | <a href="https://github.com/Dolkar/Tephra/discussions">Discussions</a></p><p><strong>Build status</strong>:</p><img class="m-image" src="https://github.com/Dolkar/Tephra/actions/workflows/build.yml/badge.svg" alt="Image" /><section id="autotoc_md1"><h2><a href="#autotoc_md1">About</a></h2><p>Tephra aspires to provide a modern alternative to high-level graphics APIs like OpenGL and DirectX 11, while leveraging the benefits of the underlying Vulkan ecosystem. Its goal is to strike a good balance between ease-of-use, performance and relevance. To that end, Tephra provides:</p><ul><li>A high-level job system for submitting batches of work to the GPU (or to other accelerators that expose the Vulkan API)</li><li>Low-level command lists that can be recorded in parallel and with minimal overhead</li><li>An easy and efficient way to create temporary images, staging buffers and scratch memory</li><li>A simple, general-purpose interface that tries not to force architectural decisions upon the user (such as the concept of frames, requiring recording callbacks or a bindless resource model)</li><li>The ability to use bleeding-edge features of graphics hardware through direct interoperability with the Vulkan API</li><li>An introductory <a href="https://dolkar.github.io/Tephra/user-guide.html">user guide</a>, extensive <a href="https://dolkar.github.io/Tephra/annotated.html">documentation</a> and <a href="https://dolkar.github.io/Tephra/examples.html">examples</a> for getting started with using the library without prior knowledge of Vulkan</li><li>Debugging features, usage validation and testing suite (WIP)</li></ul><p><em>Tephra is being used and partially developed by <a href="https://bisimulations.com/">Bohemia Interactive Simulations</a>.</em></p><p><br /><br /></p><img class="m-image" src="https://github.com/user-attachments/assets/402a48eb-9830-4fa0-a990-57e061845cf5" alt="Image" /><p>Tephra path tracing example<br /></p><section id="autotoc_md2"><h3><a href="#autotoc_md2">Comparison to OpenGL / DirectX 11</a></h3><p>One of the main differences when moving over from these older graphics APIs is the execution model. Much like in Vulkan, your draw calls don&#x27;t take effect immediately in Tephra, but are instead recorded into either jobs or command lists that then get executed at a later time. There is no &quot;immediate context&quot;. This allows for easy parallel recording and full control over the execution of workloads. Recording commands is usually done in two passes. A &quot;job&quot; first defines high-level commands such as:</p><ul><li>Allocation of temporary job-local resources</li><li>Clears, copies, blits and resolves</li><li>Render and compute passes specifying target resources and forming a set of command lists to execute</li><li>Resource export commands and Vulkan interop commands</li></ul><p>The actual draw and dispatch commands then get recorded into the command lists of each pass after the job itself has been finalized. For convenience, a callback function can be optionally used to record a small command list in-place to help with code organization.</p><p>While Tephra handles most of the Vulkan-mandated synchronization automatically from the list of job commands, analyzing commands recorded into command lists would have unacceptable performance overhead. This could ordinarily be circumvented by manually specifying all the resource accesses of each render / compute pass, but for the majority of read-only accesses, the library offers the much more convenient &quot;export&quot; mechanism. Once an image or buffer is written to by a prior command or pass, it can be exported for all future accesses of a certain type, for example as a sampled texture. In effect, for a resource used inside shaders, this means that you generally only need to specify how it is going to be read in the future after each time you write into it. In most cases that only needs to be done once.</p><p>Another system inherited from Vulkan is its binding model. By default, resources get bound as descriptors in sets, rather than individually. You can think of a material&#x27;s textures - the albedo map, normal map, roughness map, etc - as one descriptor set, through which all of its textures get bound to a compatible shader pipeline at the same time. Alternatively, you can use the &quot;bindless&quot; style of managing a global array of all of your textures inside a single giant descriptor set that you then index into inside your shaders. Tephra streamlines working with either method.</p></section><section id="autotoc_md3"><h3><a href="#autotoc_md3">Comparison to Vulkan and other Vulkan abstractions</a></h3><p>Starting from the initialization stage, Tephra already provides amenities for interacting with the varied world of Vulkan devices. Arbitrary number of queues can be used from each supported queue family, irrespective of the actual number exposed by Vulkan. Feature maps and format utilities further help handle hardware differences. Vulkan profile support is planned, making the process of choosing and relying upon a specific set of hardware features even easier. Overall, the initialization process is greatly simplified compared to raw Vulkan, akin to using the <a href="https://github.com/charles-lunarg/vk-bootstrap">vk-bootstrap</a> library.</p><p>Tephra leverages <a href="https://gpuopen.com/vulkan-memory-allocator/">VMA</a> for all of its resource allocations. On top of that, it allows efficient use of temporary resources within each job. Requested job-local resources can be aliased to the same memory location to reduce memory usage if their usage does not overlap. Growable ring buffers provide temporary staging buffers for easy uploading of data. The pools that all these reusable resources are allocated from are controllable and configurable. In general, the library tries to avoid allocations whenever possible, opting instead for pooling and reuse.</p><p>RAII is used to manage the lifetime of resources and other objects. Their destruction is delayed until the device is done using the objects, so they can be safely dropped even right after enqueuing a job. The idea of buffer and image views has been expanded upon and nearly all interactions with resources are done through these non-owning views. They can reference the entire resource, or just its part, and are relatively cheap to create on the fly.</p><p>Automatic synchronization is implemented between all job commands submitted to the same queue. The implementation tries to minimize the number of barriers without reordering the commands - the control of that is left in the hands of the user. All dependencies are resolved on a subresource level, including byte ranges for buffers and array layers / mip levels for images. Synchronization across different queues is handled with timeline semaphores and resource exports in a thread safe manner.</p><p>Many other Vulkan abstractions opt for <a href="https://themaister.net/blog/2017/08/15/render-graphs-and-vulkan-a-deep-dive/">render graphs</a> to manage synchronization and resource aliasing. Tephra&#x27;s approach works the same as a render graph that does not reorder passes, but has a smaller API footprint, does not force resource virtualization and is already familiar to users of last-gen graphics APIs. A render graph solution can be easily implemented on top of Tephra, if desired.</p><p>Descriptor sets differ from Vulkan&#x27;s by being immutable. Changing them requires waiting until the device is done with any workload that uses it, which is infeasible in practice. Instead, Tephra recycles and reuses old descriptor sets to create new ones in the background. Besides these ordinary descriptor sets, a mutable descriptor set implementation is also provided. It can be useful for emulating the binding of individual resources, or to assist with a bindless resource model.</p><p>Tephra provides many other abstractions around Vulkan, such as pools, pipelines, swapchain and others to form an all-encompassing, high-level-ish graphics library. You generally do not need to use the Vulkan API directly, except when working with extensions that Tephra does not natively support, or when interacting with various device properties and features.</p></section></section><section id="autotoc_md4"><h2><a href="#autotoc_md4">Feature list</a></h2><p>The following features are already present:</p><ul><li>All of the compute and graphics commands supported by core Vulkan</li><li>Automatic synchronization and resource state tracking inside and across queues</li><li>Temporary resource allocator that leverages aliasing to reduce memory usage</li><li>Support for multi-threaded recording and device-level thread safety</li><li>Improved image and buffer views</li><li>Safe delayed destruction of Vulkan handles</li><li>Timestamp, occlusion and pipeline queries</li><li>Ray tracing using the ray query API</li><li>Interoperability with plain Vulkan (WIP)</li><li>Native support of commonly used Vulkan extensions (WIP)</li><li>Debug logging, statistics, tests and partial usage validation (WIP)</li></ul><p>The following features are planned and will likely be available in the future:</p><ul><li>Ray tracing pipeline support (ray tracing with ray queries is already present)</li><li>Better handling of dynamic pipeline state</li><li>Improved pipeline building and management</li><li>Vulkan profiles</li></ul><p>The following features are out of scope for the library and won&#x27;t be included:</p><ul><li>Platform-dependent window management - use GLFW or a similar library instead</li><li>Shader compilation and reflection - use the existing Vulkan ecosystem</li><li>Sparse buffers and images</li><li>Linear images</li><li>CPU-side acceleration structure building and serialization</li><li>Rendering algorithms - this is not a renderer or a game engine</li></ul><p>See the <a href="https://dolkar.github.io/Tephra/user-guide.html">user guide</a> for more detailed explanations and inline code examples of Tephra&#x27;s features, or the <a href="https://github.com/Dolkar/Tephra/tree/main/examples">examples</a> folder for a runnable showcase.</p></section><section id="autotoc_md5"><h2><a href="#autotoc_md5">Prerequisities</a></h2><ul><li>Tephra is a C++ library. It makes use of C++17 features, the standard library and C++ exceptions</li><li>Visual Studio 2022 (see build/Tephra.sln) or CMake 3.15 (limited support of tests and examples)</li><li>Vulkan headers version 1.4.304 or newer, provided with the SDK <a href="https://www.lunarg.com/vulkan-sdk/">here</a></li><li>Compatible devices must support Vulkan 1.3 or newer</li><li>While any x64 platform is supported, Tephra is being used and tested mainly on Windows</li></ul><p>Building the documentation:</p><ul><li>Python 3.6 or newer</li><li>Doxygen 1.8.15 or newer</li><li>The <a href="https://palletsprojects.com/p/jinja/">Jinja2</a> and <a href="https://pygments.org/">Pygments</a> Python packages</li></ul></section><section id="autotoc_md6"><h2><a href="#autotoc_md6">Contributing</a></h2><p>Feel free to create issues, submit pull requests for non-trivial changes and participate in <a href="https://github.com/Dolkar/Tephra/discussions">Discussions</a>. Submitting examples, validation and tests is also very appreciated.</p></section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search-v2.js"></script>
<script src="searchdata-v2.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>Tephra Documentation. Created with <a href="https://doxygen.org/">Doxygen</a> 1.9.6 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
